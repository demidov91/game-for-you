{% extends 'authenticated_base.html' %}

{% load i18n %}

{% block nav_calendar_active %}active{% endblock %}

{% block content %}
    {% include 'parts/tag_content.html' %}
{% endblock %}

{% block right_side_content %}
    {% if is_publisher %}
    <div id="tag-requests-list">
        {% for event in tag_requests %}
        <div class="tag-requests-item">
            <a href="{{ event.get_absolute_url }}" class="btn btn-warning" target="_blank">{{ event }}</a>
            {% if event.first_datetime %}
                {% url 'accept_tournament_tag' tag_id=tag.id event_id=event.id as action_url %}
            {% else %}
                {% url 'accept_competition_tag' tag_id=tag.id event_id=event.id as action_url %}
            {% endif %}
            <form method="post" action="{{ action_url }}">{% csrf_token %}
                <button type="submit" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-ok"></span></button>
            </form>
        </div>
        <div class="clear"></div>
        {% endfor %}

    </div>

    {% endif %}

    {% if is_owner %}
    <div class="center"><a href="{% url 'edit_tag' tag_id=tag.id %}" class="btn btn-default">{% trans 'Edit' %}</a></div>
    {% endif %}
{% endblock %}

{% block style %}
    {{ block.super }}
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/fullcalendar.css" >
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/fullcalendar.print.css" media='print' >
{% endblock %}


{% block script %}
    {{ block.super }}
    <script>
        getEventsUrl = "{% url 'get_calendar_events' %}?tag_only={{ tag.id }}";
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/fullcalendar.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/tag_page.js"></script>
{% endblock %}
