{% extends 'authenticated_base.html' %}

{% load i18n %}

{% block nav_team_active %}active{% endblock %}

{% block content %}
    {% if team_form.errors %}
        <div class="alert alert-danger">{{ team_form.errors }}</div>
    {% endif%}

    <form action="" method="post" id="team-edit-form">{% csrf_token %}
        <div id="team-caption">{{ team_form.name.errors }}{{ team_form.name }}</div>
        <div id="team-members">
            <div>{{ team_form.members.errors }}</div>
            {% for member in team_form.fields.members.queryset %}
            <div class="toLeft">
                <div>{{ member.get_full_name }}</div>
                <div><span class="glyphicon glyphicon-remove-sign"></span></div>
                <input type="hidden" value="{{ member.id }}" name="{{ team_form.members.html_name }}" />
            </div>
            {% endfor %}
        <div class="clear"></div>
        </div>

        <input type="hidden" value="False" name="is_draft" />
        <input type="submit" class="btn btn-success"
               value="{% if team_form.is_draft.value %}{% trans 'Create' %}{% else %}{% trans 'Save' %}{% endif%}" />
    </form>

     <div class="modal" id="delete-team-modal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
         <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">{% trans 'Are you sure you want to remove a team.' %}</h4>
              </div>
              <div class="modal-body">
                <div id="login-placeholder" data-url="{% url 'account_login' %}" class="toLeft"></div>
                <div id="register-placeholder" data-url="{% url 'account_signup' %}" class="toLeft"></div>
                <div class="clear"></div>
              </div>
              <div class="modal-footer">
                  <form action="{% url 'delete_team' team_id=team_id %}" method="post">{% csrf_token %}
                      <button class="btn btn-default">{% trans 'Cancel' %}</button>
                      <input type="submit" class="btn btn-danger" value="{% trans 'Delete Team' %}"/>
                  </form>
              </div>
            </div>
         </div>
     </div>
{% endblock %}

{% block right_side_content %}
    <div id="edit-team-contacts">
    {% for contact in contacts %}
        <div><span class="glyphicon glyphicon-arrow-left"></span><span>{{ contact.about }}</span></div>
    {% endfor %}
    </div>

{% endblock %}


{% block right_side_settings %}
    <div id="delete-team-button-wrapper">
        <button {% if can_delete %}disabled="disabled" data-toggle="modal" data-target="#delete-team-modal"{% endif %} class="btn btn-danger" data-toggle="modal" data-target="#delete-team-modal">
            {% trans 'Delete team' %}
    </button>
    </div>
    {{ block.super }}
{% endblock %}

{% block script %}
    {{ block.super }}
    <script src="{{ STATIC_URL }}js/edit_team.js" type="text/javascript"></script>
{% endblock %}
